<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Friend Finder | Survey</title>
		<!-- Compiled and minified CSS -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/css/materialize.min.css">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<style>
			body {
				display: flex;
				min-height: 100vh;
				flex-direction: column;
			}
			main {
				flex: 1 0 auto;
			}
			.page-footer {
				padding: 10px 0;
			}
		</style>
	</head>

	<body>
		<main>
			<div class="container">
				<div class="row">
					<div class="col s12">
						<h2>Survey Questions<a class="right" href="/"><i class="material-icons">home</i></a></h2>
					</div>
				</div>
				<div class="row">
					<div class="divider"></div>
				</div>
				<div class="row">
					<form class="col s12">
						<div class="row">
							<div class="col s12">
								<h4>About You</h4>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<input type="text" id="name" class="required">
								<label for="name">Name (Required)</label>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<input type="text" id="photo" class="required">
								<label for="photo">Link to Photo Image (Required)</label>
							</div>
						</div>
						<div class="row">
							<div class="divider"></div>							
						</div>
						<div class="row">
							<div class="col s12">
								<h4>Questions</h4>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<h5>Your mind is always buzzing with unexplored ideas and plans.</h5>
								<select id="q1">
									<option value="" disabled selected>Select an option</option>
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<h5>Generally speaking, you rely more on your experience than your imagination.</h5>
								<select id="q2">
									<option value="" disabled selected>Select an option</option>
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<h5>You find it easy to stay relaxed and focused even when there is some pressure.</h5>
								<select id="q3">
									<option value="" disabled selected>Select an option</option>
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<h5>You rarely do something just out of sheer curiosity.</h5>
								<select id="q4">
									<option value="" disabled selected>Select an option</option>
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<h5>People can rarely upset you.</h5>
								<select id="q5">
									<option value="" disabled selected>Select an option</option>
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<h5>It is often difficult for you to relate to other people’s feelings.</h5>
								<select id="q6">
									<option value="" disabled selected>Select an option</option>
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<h5>In a discussion, truth should be more important than people’s sensitivities.</h5>
								<select id="q7">
									<option value="" disabled selected>Select an option</option>
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<h5>You rarely get carried away by fantasies and ideas.</h5>
								<select id="q8">
									<option value="" disabled selected>Select an option</option>
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<h5>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h5>
								<select id="q9">
									<option value="" disabled selected>Select an option</option>
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<h5>You feel more energetic after spending time with a group of people.</h5>
								<select id="q10">
									<option value="" disabled selected>Select an option</option>
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>
						</div>
						<div class="row">
							<div class="col s12">
								<p>
									<input type="checkbox" class="filled-in" id="addData">
									<label for="addData">Add My Info to Friends List</label>
								</p>
							</div>
						</div>
						<div class="row">
							<div class="col s12">
								<button class="btn waves-effect waves-light" type="submit" id="submit">Submit<i class="material-icons right">send</i></button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</main>
		<footer class="page-footer teal darken-3">
			<div class="container">
				&copy; Copyright 2017 Joseph Ball
				<div class="right">
					<a href="/api/friends">API Friends List </a>
					|
					<a href="https://github.com/josephtball/Friend-Finder"> GitHub Repo</a>
				</div>
			</div>
		</footer>

		<!-- Modal Structure -->
		<div id="matchModal" class="modal">
			<div class="modal-content">
				<h4>Best Match</h4>
				<div class="divider"></div>
				<h5 id="matchName"></h5>
				<img id="matchPhoto" class="responsive-img" src="https://vignette1.wikia.nocookie.net/cutemariobro/images/5/59/Person-placeholder.jpg/revision/latest?cb=20170131092134">
			</div>
			<div class="modal-footer">
				<a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
			</div>
		</div>
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
		<!-- Compiled and minified JavaScript -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/js/materialize.min.js"></script>
		<script type="text/javascript">
			$(document).ready(function() {
				$('select').material_select();

				$('#submit').on('click', function() {
					event.preventDefault();

					function validate() {
						var valid = true;

						$('.required').each(function() {
							if ($(this).val() === "") {
								valid = false;
							}
						});

						$('select').each(function() {
							if ($(this).val() === null) {
								valid = false;
							}
						});

						return valid;
					}

					if ( true) {
						// var userInfo = {
						// 	name: $('#name').val().trim(),
						// 	photo: $('#photo').val().trim(),
						// 	scores: [$('#q1').val(), $('#q2').val(), $('#q3').val(), $('#q4').val(), $('#q5').val(), $('#q6').val(), $('#q7').val(), $('#q8').val(), $('#q9').val(), $('#q10').val(),],
						// 	add: $('#addData').prop('checked')
						// };
						var userInfo = {
							name: 'Joe',
							photo: 'http://orig07.deviantart.net/ad63/f/2011/080/2/7/darkwing_duck_by_rongs1234-d3c6t5i.jpg',
							scores: [4, 2, 5, 1, 3, 2, 2, 1, 3, 2,],
							add: true
						};

						var currentURL = window.location.origin;

						$.post(currentURL+'/api/friends', userInfo, function(response) {
							console.log(response);

							$('#matchName').text(response.name);
							$('#matchPhoto').attr('src', response.photo);

							$('.modal').modal('open');
						});


					} else {
						alert('Please answer all questions before submitting.')
					}
				});
			});
		</script>
	</body>
</html>